<!DOCTYPE html>
<html><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="map[]">
    <meta name="generator" content="Hugo 0.63.2" />
    <title>noone.dev</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css">
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
</head><body><nav class="navbar is-light" role="navigation" aria-label="main navigation">
    <div class="navbar-brand">
        <a class="navbar-item" href="/">
            <img src="/apple-touch-icon.png" width="32" height="32">&nbsp;&nbsp;<strong>noone.dev</strong>
        </a>
        
            <a class="navbar-item" href="/posts/"> posts </a>
        
    </div>
</nav><section class="section">
        <div class="container">
<p class="title is-4"><a href="/2011/03/17/using-complex-xsds-as-embedded-resources/">Complex XSDs as Embedded Resources</a></p>
<p class="subtitle is-6 has-text-grey"><i class="fas fa-calendar-alt" aria-hidden="true"></i> March 17, 2011</p>
<hr />
<div class="content">
    <p>I was recently tasked with validating XML files against a very complex set of XSD schema files.  This is easily accomplished if your XSD files live on the filesystem, because the .Net xml resolver can find referenced schemas via a relative or absolute Uri.  In my case, the schema files were compiled as embedded resources in my project.  As expected, the XML schema loader didn’t know how to find referenced schemas – it was likely searching for them  in the path of the running application.  To solve this, I had to help out the schema loader by implementing a custom resolver that knew how to pull schema from the embedded resources.  The code…</p>
<p>Implement a custom XmlUrlResolver to find schema references as embedded resources.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>Create a XmlSchemaSet, and set the XmlResolver property to the custom resolver implemented above. Then, load up the main XSD schema.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>Create a XmlReaderSettings object and set the Schemas property to the schema set loaded above. Lastly, load up an XML file with an XmlReader and read it.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>The validation callback function will be invoked on each validation error while reading the file with the XmlReader.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>References:</p>
<ul>
<li><a href="http://msdn.microsoft.com/en-us/library/as3tta56%28v=VS.90%29.aspx">Validation Using the XmlSchemaSet</a></li>
<li><a href="http://www.hanselman.com/blog/LoadingXmlSchemaFilesOutOfAssemblyResources.aspx">Loading XmlSchema files out of Assembly Resources</a><br>
(contains some obsoleted code, but it was still helpful)</li>
</ul>

</div>

        </div>
    </section><footer class="footer">
    <div class="content has-text-centered">
        <p class="is-size-4">
            
                
                    <a style="margin-right: 8px;" href="https://github.com/cleverswine/" aria-label="Github"   >
                        <i class="fab fa-github fa-2x" aria-hidden="true"></i>
                    </a>
                
                    <a style="margin-right: 8px;" href="https://twitter.com/cleverswine/" aria-label="Twitter"   >
                        <i class="fab fa-twitter fa-2x" aria-hidden="true"></i>
                    </a>
                
                    <a style="margin-right: 8px;" href="https://www.linkedin.com/in/kevinnoone/" aria-label="LinkedIn"   >
                        <i class="fab fa-linkedin" aria-hidden="true"></i>
                    </a>
                
                    <a style="margin-right: 8px;" href="http://www.flickr.com/photos/cleverswine/" aria-label="Flickr"   >
                        <i class="fab fa-flickr" aria-hidden="true"></i>
                    </a>
                
                    <a style="margin-right: 8px;" href="https://myhugosite.com/index.xml" aria-label="RSS" rel="alternate"   type="application/rss&#43;xml" >
                        <i class="fas fa-rss" aria-hidden="true"></i>
                    </a>
                
            
        </p>
        <p> © 2020 Kevin Noone · Powered by <a href="https://gohugo.io/">Hugo</a> & <a href="https://bulma.io/">Bulma</a></p>
    </div>
</footer></body>

</html>