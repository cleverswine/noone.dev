<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="map[]">
    <meta name="generator" content="Hugo 0.72.0" />
    <title>noone.dev</title>
    <link rel='stylesheet' href='/styles/main.css'>
    <link rel="stylesheet" href="https://cdn.materialdesignicons.com/5.3.45/css/materialdesignicons.min.css" type="text/css">
    <style>
        ul.pagination {
            margin: 1.5em 0 0;
            padding-left: 0;
            list-style: none;
            overflow: hidden;
        }

        ul.pagination li {
            float: left;
            margin-left: 0;
            margin-right: 0.8em;
        }

        li.active {
            border-bottom: 1px solid yellow;
        }
    </style>
</head>

<body>
    <h1>Kevin Noone</h1>
    <hr/>
<h3><a href="/2011/03/17/using-complex-xsds-as-embedded-resources/">Complex XSDs as Embedded Resources</a></h3>
<sub>March 17, 2011</sub>
<hr />
<div>
    <p>I was recently tasked with validating XML files against a very complex set of XSD schema files.  This is easily accomplished if your XSD files live on the filesystem, because the .Net xml resolver can find referenced schemas via a relative or absolute Uri.  In my case, the schema files were compiled as embedded resources in my project.  As expected, the XML schema loader didn’t know how to find referenced schemas – it was likely searching for them  in the path of the running application.  To solve this, I had to help out the schema loader by implementing a custom resolver that knew how to pull schema from the embedded resources.  The code…</p>
<p>Implement a custom XmlUrlResolver to find schema references as embedded resources.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>Create a XmlSchemaSet, and set the XmlResolver property to the custom resolver implemented above. Then, load up the main XSD schema.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>Create a XmlReaderSettings object and set the Schemas property to the schema set loaded above. Lastly, load up an XML file with an XmlReader and read it.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>The validation callback function will be invoked on each validation error while reading the file with the XmlReader.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>References:</p>
<ul>
<li><a href="http://msdn.microsoft.com/en-us/library/as3tta56%28v=VS.90%29.aspx">Validation Using the XmlSchemaSet</a></li>
<li><a href="http://www.hanselman.com/blog/LoadingXmlSchemaFilesOutOfAssemblyResources.aspx">Loading XmlSchema files out of Assembly Resources</a><br>
(contains some obsoleted code, but it was still helpful)</li>
</ul>

</div>

    <p style="margin-top: 1.8em;">
        <hr /> 
        © 2021 Kevin Noone · Powered by <a href="https://gohugo.io/">Hugo</a> and <a href="https://pages.github.com/">GitHub Pages</a>
        <br/>
    </p>
</body>

</html>