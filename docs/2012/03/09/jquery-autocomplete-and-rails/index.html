<!DOCTYPE html>
<html><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="map[]">
    <meta name="generator" content="Hugo 0.54.0" />
    <title>noone.dev</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Oxygen+Mono">
    <link rel="stylesheet" href="/fontawesome-free-5.7.2/css/all.min.css">
    
    <link rel="stylesheet" href="http://noone.dev/scss/main.min.eb5f6698e9eef38a204f38a27f3631ace5720b7526fb244b4d3828ca090437c6.css">
</head>
<body><nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
    <a class="navbar-brand" href="/">$HOME</a>
    
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse"
        aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
        <ul class="navbar-nav ml-auto">
            
            
            <li class="nav-item">
                <a class="nav-link" href="/about/">~/about</a>
            </li>
            
            
            
            <li class="nav-item">
                <a class="nav-link" href="/posts/">~/posts</a>
            </li>
            
            
        </ul>
    </div>
</nav><div id="content" class="container">
<h5>Mar 09  2012 <a href="http://noone.dev/2012/03/09/jquery-autocomplete-and-rails/">jQuery Autocomplete and Rails</a></h5>
<hr />
<div class="post-content">
    <p>This is an example of how I used the <a href="http://jqueryui.com/demos/autocomplete/" target="_blank">jQuery Automcomplete Widget</a> with Rails 3.2 for a recipe search field. Some of the jQuery stuff mentioned below is included out of the box with a new Rails application.</p>

<ul>
<li>Make sure the jQuery gem is referenced in the <em>Gemfile</em></li>
</ul>

<pre lang="ruby">gem 'jquery-rails'</pre>

<ul>
<li>Include the jQuery javascripts in <em>app/assets/javascripts/application.js</em></li>
</ul>

<pre lang="ruby">//= require jquery
//= require jquery_ujs
//= require jquery-ui</pre>

<ul>
<li>Download one of the jQuery-ui css files, or a custom one, and put it in one of you asset locations. I put mine in vendor/assets/stylesheets/jquery-ui-1.8.18.custom.css. Include the css file in <em>app/assets/stylesheets/application.css</em></li>
</ul>

<pre lang="ruby">*= require jquery-ui-1.8.18.custom.css</pre>

<ul>
<li>Create a controller action to search and return values for the autocomplete dropdown menu. In my Recipes controller (you could also create a seperate Search controller), I created an Action to return a list of matching recipe titles as a json array. The search can also be applied to recipes in a single category, hence the category_id parameter.</li>
</ul>

<pre lang="ruby">def search_on_title
    # search_on_title is a method on the model to do a wildcard search on keyword
    recipes = Recipe.search_on_title(params[:term], params[:category_id])
    render json: recipes.map(&:title)
  end</pre>

<ul>
<li>Add a route for the search_on_title action.</li>
</ul>

<pre lang="ruby">resources :recipes do
    get 'search_on_title', :on => :collection
  end</pre>

<ul>
<li>The search form is just a normal form.</li>
</ul>

<pre lang="ruby">&lt;%= form_tag '', :method => :get do %>
    &lt;%= search_field_tag :term, params[:term], :class=> "input-large" %>
    &lt;%= submit_tag "Filter", :name => nil, :class => 'button btn', :id => "search_bn" %>
  &lt;% end %>         
</pre>

<ul>
<li>The javascript to hook up the autocomplete functionality looks like this. Notice the extra parameter to the source url &#8211; that&#8217;s how you would pass multiple values to your filter.</li>
</ul>

<pre lang="javascript">$("input#term").autocomplete({
    source: '&lt;%=search_on_title_recipes_path%>?category_id=&lt;%=params[:category_id]%>',
    minLength: 2, delay: 500
});</pre>

<p>There&#8217;s also a Rails gem to make autocomplete easier, but I found this to be easy enough such that I didn&#8217;t have to depend on an additional plugin.</p>

</div>

    </div></body>
<script src="jquery-3.3.1.slim/jquery.slim.min.js"></script>
<script src="bootstrap-4.3.1/js/dist/dropdown.js"></script>

</html>